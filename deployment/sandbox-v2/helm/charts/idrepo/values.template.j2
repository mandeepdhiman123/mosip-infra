component: idrepo
part-of: mosip
activeProfileEnv: mz 
springConfigLabel: {{ config_repo.branch }} 
configServerUrl: {{ config_server.internal_url }}
containerUserId: {{ container_user_id }}
containerUserGid: {{ container_user_gid }}
containerWorkDir: {{ container_work_dir }}
podUserId: {{ pod_user_id }}
podUserGid: {{ pod_user_gid }}
service_account: {{ psp_service_account }}
ingress:
   namespace: default
artifactoryUrl: {{ artifactory_url }} 
sitePublicUrl: {{ site.sandbox_public_url }}
probe:
  initialDelay: 60  # Seconds
  period: 30 # Seconds
imagePullPolicy: Always

isGlowroot: {{ is_glowroot }} 

dockerHub:
  private: {{ docker_hub.private }}  
  keyname: {{ docker_hub.keyname }}

extraction_format: mock

services:
  identity:
    serviceName: {{ versions.services.idrepo.identity.keys()[0] }} 
    dockerImage: {{ versions.services.idrepo.identity.values()[0] }}
    serviceName: idrepo-identity-service
    containerPort: 8090
    servicePort: 80
    ingressPath: /idrepository/v1/identity 
    healthUrl: /idrepository/v1/identity/actuator/health
  vid: 
    serviceName: {{ versions.services.idrepo.vid.keys()[0] }} 
    dockerImage: {{ versions.services.idrepo.vid.values()[0] }}
    containerPort: 8091
    servicePort: 80
    ingressPath: /idrepository/v1/vid
    healthUrl: /idrepository/v1/actuator/health # TODO: Check this url. It does not have /vid
  bioextractor:
    serviceName: {{ versions.services.idrepo.bioextractor.keys()[0] }}
    dockerImage: {{ versions.services.idrepo.bioextractor.values()[0] }}
    containerPort: 8100
    servicePort: 80
    ingressPath: /v1/bioextractor/mock
    healthUrl: /v1/bioextractor/mock/actuator/health
  credentialrequest:
    serviceName: {{ versions.services.idrepo.credentialreq.keys()[0] }}
    dockerImage: {{ versions.services.idrepo.credentialreq.values()[0] }}
    containerPort: 8094
    servicePort: 80
    ingressPath: /v1/credentialrequest
    healthUrl: /v1/credentialrequest/actuator/health
  credentialservice:
    serviceName: {{ versions.services.idrepo.credentialservice.keys()[0] }}
    dockerImage: {{ versions.services.idrepo.credentialservice.values()[0] }}
    containerPort: 8095
    servicePort: 80
    ingressPath: /v1/credentialservice
    healthUrl: /v1/credentialservice/actuator/health

generators:
  uinhash:  
    name: {{ versions.services.idrepo.uinhash.keys()[0] }} 
    dockerImage: {{ versions.services.idrepo.uinhash.values()[0] }}
    table: mosip.idrepo.identity.db.shard.uinHashTable
    db_alias: mosip.idrepo.identity.db.shard
    schema: mosip.idrepo.identity.db.shard.schema  
  uinencrypt:
    name: {{ versions.services.idrepo.uinencrypt.keys()[0] }} 
    dockerImage: {{ versions.services.idrepo.uinencrypt.values()[0] }}
    table: mosip.idrepo.identity.db.shard.uinEncryptTable 
    db_alias: mosip.idrepo.identity.db.shard 
    schema_name: mosip.idrepo.identity.db.shard.schema 
  vidhash:
    name: {{ versions.services.idrepo.vidhash.keys()[0] }} 
    dockerImage: {{ versions.services.idrepo.vidhash.values()[0] }}
    table: mosip.idrepo.vid.db.uinHashTable
    db_alias: mosip.idrepo.vid.db 
    schema: mosip.idrepo.vid.db.schema
  videncrypt:
    name: {{ versions.services.idrepo.videncrypt.keys()[0] }} 
    dockerImage: {{ versions.services.idrepo.videncrypt.values()[0] }}
    table: mosip.idrepo.vid.db.uinEncryptTable 
    db_alias: mosip.idrepo.vid.db 
    schema: mosip.idrepo.vid.db.schema 

